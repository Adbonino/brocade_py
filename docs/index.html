<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brocade G720</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>




<body class="bg-gray-100 text-gray-900">

  <div>
    <div id="header-container"></div>

    <script>
      // Cargar sidebar
      fetch('header.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('header-container').innerHTML = data;
    
          // Ahora que el HTML fue insertado, agregamos eventos
          document.querySelectorAll('#header-container button').forEach(button => {
            button.addEventListener('click', () => {
              const id = button.getAttribute('onclick').match(/'([^']+)'/)[1];
              const menu = document.getElementById(id);
              if (menu) {
                menu.classList.toggle('hidden');
              }
            });
          });
    
          // Resaltar el enlace activo
          const currentPath = window.location.pathname.split('/').pop();
          document.querySelectorAll('#header-container a').forEach(link => {
            if(link.getAttribute('href') === currentPath){
              link.classList.add('font-bold', 'underline');
              const parentMenu = link.closest('div[id$="Menu"]');
              if(parentMenu){
                parentMenu.classList.remove('hidden');
              }
            }
          });
        });
    </script>
  </div>

  <div class="flex min-h-screen">

    <div id="header-container"></div>

    <script>
      // Cargar sidebar
      fetch('header.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('header-container').innerHTML = data;
    
          // Ahora que el HTML fue insertado, agregamos eventos
          document.querySelectorAll('#header-container button').forEach(button => {
            button.addEventListener('click', () => {
              const id = button.getAttribute('onclick').match(/'([^']+)'/)[1];
              const menu = document.getElementById(id);
              if (menu) {
                menu.classList.toggle('hidden');
              }
            });
          });
    
          // Resaltar el enlace activo
          const currentPath = window.location.pathname.split('/').pop();
          document.querySelectorAll('#header-container a').forEach(link => {
            if(link.getAttribute('href') === currentPath){
              link.classList.add('font-bold', 'underline');
              const parentMenu = link.closest('div[id$="Menu"]');
              if(parentMenu){
                parentMenu.classList.remove('hidden');
              }
            }
          });
        });
    </script>


    <!-- Contenido principal -->
    <main class="flex-1 p-4">
      <section class=" mx-auto bg-white p-8 rounded shadow">
        <h1 class="text-3xl font-bold mb-6"><span class="text-blue-500"><b>cfgsave</b></span> - Guardar la configuración</h1>

        <p class="mb-4">
            Este comando guardar la configuración de zona actual. Escribe la configuración definida y el nombre de la configuración vigente en la memoria no volátil de todos los conmutadores de la estructura.
            La configuración guardada se recarga automáticamente al encender el sistema y, si una configuración estaba vigente en el momento de guardarse, se reinstala con el comando <b>cfgEnable</b>.
        </p>

        <p class="mb-4">
            La configuración guardada se recarga automáticamente al encender el sistema y, si una configuración estaba vigente en el momento de guardarse, se reinstala con el comando <b>cfgEnable</b>.
            Dado que la configuración guardada se recarga al encender el sistema, solo se guardan las configuraciones válidas. 
        </p>

        <p class="mb-4">
            El comando <b>cfgSave</b> valida la configuración vigente realizando las mismas pruebas que el comando <b>cfgEnable</b>. Si las pruebas fallan, se muestra un mensaje de error y la configuración no se guarda.
            Si hay una transacción abierta en otro conmutador de la estructura al ejecutar este comando, la transacción en el otro conmutador se cancela automáticamente. 
            Si hay transacciones abiertas en la estructura, solo se puede guardar una.
        </p>

        <p class="mb-4">
            <b>cfgtransshow --opentrans</b> muestra la lista de todos los dominios en la estructura con transacciones abiertas.
        </p>

        <h2 class="text-2xl font-semibold mb-3">Ejemplo de respuesta:</h2>
        <pre class="bg-gray-100 text-sm p-4 rounded overflow-x-auto mb-6">
<code>    
    switch:admin> cfgsave
    You are about to save the Defined zoning configuration. This
    action will only save the changes on Defined configuration.
    <span class="bg-yellow-200 text-black px-1 rounded">Do you want to save</span> the Defined zoning configuration only? (yes, y, no, n):
    [no] y
</code>
        </pre>

 

        <h2 class="text-2xl font-semibold mb-3">Python - Ejemplo de codigo</h2>
        <pre class="bg-gray-100 text-sm p-4 rounded overflow-x-auto mb-6">
<code>   
    ...

    print("*************************************")
    print("Guardando configuracion ...")
    # === Guardar configuración ===
    shell.send("cfgsave\n")                   
    time.sleep(5)
    
    output = ""
    if shell.recv_ready():
        output = shell.recv(5000).decode("utf-8")
        print(output.strip())
    
    # Responder al prompt si es necesario
    if "<span class="bg-yellow-200 text-black px-1 rounded">Do you want to save</span>" in output:
        shell.send("y\n")
        time.sleep(2)

    ...
</code>
        </pre>



        <div class="mt-8">
          <a href="cfgsave-basic.html" class="inline-block bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">
            Siguiente: Variables
          </a>
        </div>
      </section>
    </main>

  </div>

</body>
</html>
